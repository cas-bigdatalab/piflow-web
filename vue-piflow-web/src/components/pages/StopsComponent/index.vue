<template>
  <section>
    <!-- 头部分 -->
    <div class="navbar">
      <div class="left">
        <span>{{$t("sidebar.stopsComponent")}}</span>
      </div>
    </div>
    <!-- 检索部分 -->
    <div class="input">
      <vxe-toolbar>
        <template #buttons>
          <vxe-input v-model="param" type="search" :placeholder="$t('modal.placeholder')" @keyup="searchEvent"  style="width: 300px"></vxe-input>
        </template>
      </vxe-toolbar>

    </div>

    <!-- 表格部分 -->
    <div :style="style">
      <vxe-table
          resizable
          highlight-hover-row
          row-key
          border
          height="auto"
          ref="xTree"
          size="medium"
          class="mytable-scrollbar"
          row-id="id"
          :loading="loading"
          :tree-config="{children: 'stopsComponentVoList'}"
          :checkbox-config="{labelField: 'groupName', checkRowKeys: checkRowKeys, reserve:true}"
          @checkbox-change="selectChangeEvent"
          @checkbox-all="selectAll"
          :data="tableList">
        <vxe-table-column field="groupName" :title="$t('stopsComponent_columns.name')" type="checkbox"  tree-node>
          <template #default="{ row }">
              <span>
                <span v-if="row.groupName" v-html="row.groupName"></span>
                <span v-else v-html="row.name">{{ row.name }}</span>
              </span>
          </template>
        </vxe-table-column>

        <vxe-table-column field="bundel" title="bundel" type="html"></vxe-table-column>
        <vxe-table-column field="owner" title="owner" type="html"></vxe-table-column>
        <vxe-table-column field="description" :title="$t('stopsComponent_columns.description')" type="html"></vxe-table-column>
      </vxe-table>
    </div>




<!--    &lt;!&ndash; 分页部分 &ndash;&gt;-->
<!--    <div class="page">-->
<!--      <Page-->
<!--        :prev-text="$t('page.prev_text')"-->
<!--        :next-text="$t('page.next_text')"-->
<!--        show-elevator-->
<!--        :show-total="true"-->
<!--        :total="total"-->
<!--        show-sizer-->
<!--        @on-change="onPageChange"-->
<!--        @on-page-size-change="onPageSizeChange"-->
<!--      />-->
<!--    </div>-->
  </section>
</template>

<script>
import XEUtils from 'xe-utils'
export default {
  name: "stopsComponent",
  components: {},
  data() {
    return {
      page: 1,
      limit: 10,
      total: 0,
      tableData: [],
      param: "",

      style: {
        height: "auto"
      },

      checkRowKeys: [],

      queryJson: {
        bundle: '',
        stopsGroups: '',
        isShow: 0
      },

      tableList: [],
      loading: false

    };
  },
  watch: {
    // param(val) {
    //   this.page = 1;
    //   this.limit = 10;
    //   this.getTableData();
    // },
  },
  computed: {
    columns() {
      return [
        {
          title: this.$t("stopsComponent_columns.name"),
          key: "name",
          sortable: true,
        },
        {
          title: this.$t("stopsComponent_columns.description"),
          key: "description",
        },
        {
          title: this.$t("flow_columns.CreateTime"),
          key: "crtDttmString",
          sortable: true,
        },
        {
          title: this.$t("flow_columns.action"),
          slot: "action",
          width: 350,
          align: "center",
        },
      ];
    },
  },
  created() {
    this.getTableData();
  },
  mounted() {

    this.setSize();
  },
  methods: {
    setSize() {
      let headerHeight = document.querySelector("header").offsetHeight;
      let bodyHeight = document.querySelector("body").offsetHeight;
      let footerHeight = document.querySelector("footer").offsetHeight;
      this.style.height = bodyHeight - headerHeight - footerHeight -16*2-45-59 + "px";
    },

    //  多选框选中
    selectChangeEvent ({ checked, records, row }) {
      let queryJson= {
        bundle: [],
        stopsGroups: [],
        isShow: 1
      };
      if (checked){

        queryJson.isShow = 1;
        records.forEach((item)=>{
          if ( item.groupName){

          }else {
            queryJson.bundle.push(item.bundel);
            queryJson.stopsGroups.push(item.groups);
          }
        })
        this.stopsDisplayed(queryJson);

      }else {
        if (!!row.groupName){
          queryJson.isShow = 0;
          row.stopsComponentVoList.forEach((item)=>{
            queryJson.bundle.push(item.bundel);
            queryJson.stopsGroups.push(item.groups);
          })
          this.stopsDisplayed(queryJson);
        }else {
          queryJson.isShow = 0;
          queryJson.bundle.push(row.bundel);
          queryJson.stopsGroups.push(row.groups);
          this.stopsDisplayed(queryJson);
        }
      }










    },
    // 全选
    selectAll ({ checked, records }) {
      let queryJson= {
        bundle: [],
        stopsGroups: [],
        isShow: 1
      };
      if (checked){
        queryJson.isShow = 1;
        records.forEach((item)=>{
          if ( item.groupName){

          }else {
            queryJson.bundle.push(item.bundel);
            queryJson.stopsGroups.push(item.groups);
          }
        })
      }else {
        queryJson.isShow = 0;
        let getDataList = this.$refs.xTree.getData();  //获取全部数据
        getDataList.forEach((item)=>{
          item.stopsComponentVoList.forEach((items)=>{
            queryJson.bundle.push(items.bundel);
            queryJson.stopsGroups.push(items.groups);
          })
        })
      }

      this.stopsDisplayed(queryJson);
    },

    stopsDisplayed(queryJson){
      this.loading = true;
      this.$axios
          .post("/stopsManage/updatestopsComponentIsShow", this.$qs.stringify(queryJson))
          .then((res) => {
            if (res.data.code === 200){
              this.loading = false;
              this.$Message.success('Save success');
            }
              // this.getTableData();

          })
          .catch((error) => {
            this.loading = false;
            console.log(error);
            this.$event.emit("looding", false);
            this.$Message.error({
              content: this.$t("tip.fault_content"),
              duration: 3
            });
          });
    },

    //获取表格数据
    getTableData() {
      // let data = {"code":200,"stopGroupList":[{"id":"4dbd6c02d4fb420bb4b36cf17de2bc3b","groupName":"Algorithms_ASR","stopsComponentVoList":[{"id":"463fdb0114b7441fbe420a8601fd7aaf","name":"ChineseSpeechRecognition","bundel":"cn.piflow.bundle.asr.ChineseSpeechRecognition","groups":"Algorithms_ASR","owner":"huchuan0901@163.com","description":"Speech recognition","inports":"Any","inPortType":{"stringValue":"ANY","text":"Any"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true}],"handler":{}},{"id":"44e486755a7a4effbffdad3fd60c9754","groupName":"Algorithms_ImageProcess","stopsComponentVoList":[{"id":"c63084d09da44b389b2468b8d24fdba7","name":"AnimalClassification","bundel":"cn.piflow.bundle.imageProcess.AnimalClassification","groups":"Algorithms_ImageProcess","owner":"huchuan0901@163.com","description":"Image classification","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":false}],"handler":{}},{"id":"989068298b7a4dc296f76644dc57f71e","groupName":"Algorithms_NLP","stopsComponentVoList":[{"id":"4579d2748f6e49549f676a2c31903994","name":"WordSpliter","bundel":"cn.piflow.bundle.nlp.WordSpliter","groups":"Algorithms_NLP","owner":"huchuan0901@163.com","description":"Word segmentation","inports":"Any","inPortType":{"stringValue":"ANY","text":"Any"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":false}],"handler":{}},{"id":"bf72fec35fe146c7a6ef8485dfded9c1","groupName":"CSV","stopsComponentVoList":[{"id":"f73594a41be740019c6630cda37e7a03","name":"CsvParser","bundel":"cn.piflow.bundle.csv.CsvParser","groups":"CSV","owner":"xjzhu@cnic.cn","description":"Parse csv file or folder","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"518eed1e4ca54a35b5bc7c4940aa01ab","name":"CsvStringParser","bundel":"cn.piflow.bundle.csv.CsvStringParser","groups":"CSV","owner":"yangqidong@cnic.cn","description":"Parse csv string","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"8d2a4656b98a43eaa9cf901edc9cee8e","name":"CsvSave","bundel":"cn.piflow.bundle.csv.CsvSave","groups":"CSV","owner":"xjzhu@cnic.cn","description":"Save the data as a csv file.","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"61f3782955584f30b771dfb03708cf18","name":"HiveToCsv","bundel":"cn.sts.Piflow.HiveToCsv","groups":"CSV","owner":"bf219319@163.com","description":"Hive to Csv","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true}],"handler":{}},{"id":"7b8f9b1077f94a4ea44ee56c0b271049","groupName":"Common","stopsComponentVoList":[{"id":"ad63cf750adb4f7eb88d5eab7bb585cd","name":"DropField","bundel":"cn.piflow.bundle.common.DropField","groups":"Common","owner":"ygang@cnic.cn","description":"Delete one or more columns","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"94ef55c585724d2ab641f04c780d8799","name":"ConvertSchema","bundel":"cn.piflow.bundle.common.ConvertSchema","groups":"Common","owner":"yangqidong@cnic.cn","description":"Change field name","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"17538bad341a4cfa8b8f5d4cf0475d19","name":"SelectField","bundel":"cn.piflow.bundle.common.SelectField","groups":"Common","owner":"xjzhu@cnic.cn","description":"Select data column","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"050d2cfa7093432e8e1f4ba812aa30ca","name":"Fork","bundel":"cn.piflow.bundle.common.Fork","groups":"Common","owner":"xjzhu@cnic.cn","description":"Forking data to different stops","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Any","outPortType":{"stringValue":"ANY","text":"Any"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"b93ee36e8aa44d5b87dbbf34f7ffbe82","name":"Subtract","bundel":"cn.piflow.bundle.common.Subtract","groups":"Common","owner":"yangqidong@cnic.cn","description":"Delete the existing data in the right table from the left table","inports":"Left,Right","inPortType":{"stringValue":"USER_DEFAULT","text":"UserDefault"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"f77f0b5e1d9f4aa99c15f6ba3a38448f","name":"Distinct","bundel":"cn.piflow.bundle.common.Distinct","groups":"Common","owner":"yangqidong@cnic.cn","description":"Duplicate based on the specified column name or all colume names","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"b645b4403fa64c1eb6d2375a3de446f8","name":"MockData","bundel":"cn.piflow.bundle.common.MockData","groups":"Common","owner":"xjzhu@cnic.cn","description":"Mock dataframe.","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"12a2e088afbf418b80be80bb8679170d","name":"AddUUIDStop","bundel":"cn.piflow.bundle.common.AddUUIDStop","groups":"Common","owner":"ygang@cnic.cn","description":"Add UUID column","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"f90ade88c17542cfba74627767979db6","name":"ExecuteSQLStop","bundel":"cn.piflow.bundle.common.ExecuteSQLStop","groups":"Common","owner":"ygang@cnic.cn","description":"Create temporary view table to execute sql","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"397b2cbeb7bf46d3a83e34df7050e73f","name":"Join","bundel":"cn.piflow.bundle.common.Join","groups":"Common","owner":"yangqidong@cnic.cn","description":"Table joins include full join, left join, right join and inner join","inports":"Left,Right","inPortType":{"stringValue":"USER_DEFAULT","text":"UserDefault"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"a4f09f64c266435890378c23def9116f","name":"Route","bundel":"cn.piflow.bundle.common.Route","groups":"Common","owner":"xjzhu@cnic.cn","description":"Route data by custom properties,key is port,value is filter","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Route","outPortType":{"stringValue":"ROUTE","text":"Route"},"isCustomized":true,"visualizationType":"","isShow":true},{"id":"542d65d2d8614574a2c336a83e45ee71","name":"Merge","bundel":"cn.piflow.bundle.common.Merge","groups":"Common","owner":"xjzhu@cnic.cn","description":"Merge data into one stop","inports":"Any","inPortType":{"stringValue":"ANY","text":"Any"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"b8c5c44e8c1d49e3bf8f77872ee871c6","name":"Filter","bundel":"cn.piflow.bundle.common.Filter","groups":"Common","owner":"xjzhu@cnic.cn","description":"Filter by condition","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"0b8326d206044002b7b5e8eb3b21379e","name":"Trager","bundel":"cn.piflow.bundle.common.Trager","groups":"Common","owner":"ygang@cnic.cn","description":"Upstream and downstream middleware","inports":"Any","inPortType":{"stringValue":"ANY","text":"Any"},"outports":"Any","outPortType":{"stringValue":"ANY","text":"Any"},"isCustomized":false,"visualizationType":"","isShow":true}],"handler":{}},{"id":"2877b1d924054f3c83ab397eb69b29d7","groupName":"Data Clean","stopsComponentVoList":[{"id":"f8b89c288a0044f3b59ce5696eda011c","name":"EmailClean","bundel":"cn.piflow.bundle.clean.EmailClean","groups":"Data Clean","owner":"songdongze@cnic.cn","description":"Cleaning data in email format","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"e9ef9497411f48bb9ca2f1153e9a6f53","name":"IdentityNumberClean","bundel":"cn.piflow.bundle.clean.IdentityNumberClean","groups":"Data Clean","owner":"06whuxx@163.com","description":"Cleaning data in ID Card format","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"31dc0bc0d9824c16b49972a8011a223d","name":"TitleClean","bundel":"cn.piflow.bundle.clean.TitleClean","groups":"Data Clean","owner":"06whuxx@163.com","description":"Cleaning title data","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"81cc5691b4304874a8232ce8b874c2ec","name":"ProvinceClean","bundel":"cn.piflow.bundle.clean.ProvinceClean","groups":"Data Clean","owner":"songdongze@cnic.cn","description":"Cleaning province data","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"6f74de531af946d38ca96bbde36f5313","name":"PhoneNumberClean","bundel":"cn.piflow.bundle.clean.PhoneNumberClean","groups":"Data Clean","owner":"06whuxx@163.com","description":"Cleaning data in mobile number format","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true}],"handler":{}},{"id":"631372ee46564639b3cd30d4dec19048","groupName":"ElasticSearch","stopsComponentVoList":[{"id":"b18f63694e7f4e738b379ed18a7beda9","name":"PutElasticsearch","bundel":"cn.piflow.bundle.elasticsearch.PutElasticsearch","groups":"ElasticSearch","owner":"ygang@cnic.cn","description":"Put data into Elasticsearch","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"0eeaaaba4d7c46ef9d554e794e33255d","name":"QueryElasticsearch","bundel":"cn.piflow.bundle.elasticsearch.QueryElasticsearch","groups":"ElasticSearch","owner":"ygang@cnic.cn","description":"Query data from Elasticsearch","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true}],"handler":{}},{"id":"02f21d72923f4b7990a2e1d09077b9a0","groupName":"External","stopsComponentVoList":[{"id":"9119aee93b234d0080d93a82e7b8818b","name":"ShowData1","bundel":"cn.piflow.bundle.external.ShowData1","groups":"External","owner":"xjzhu@cnic.cn","description":"Show Data","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"e9089ecaa7e74ea0b62a95466e8978bd","name":"ShowData","bundel":"cn.piflow.bundle.external.ShowData","groups":"External","owner":"xjzhu@cnic.cn","description":"Show Data","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"cbd60a2719d84e1cafd0bb87166537ea","name":"ShowDataTest","bundel":"cn.piflow.bundle.external.ShowDataTest","groups":"External","owner":"xjzhu@cnic.cn","description":"Show Data","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true}],"handler":{}},{"id":"1666804ee14e424f89059b97c2441180","groupName":"File","stopsComponentVoList":[{"id":"4e2599629f1f429da1e96f2ae07f16ac","name":"PutFile","bundel":"cn.piflow.bundle.file.PutFile","groups":"File","owner":"ygang@cnic.cn","description":"Upload local files to hdfs","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"88b138f945fc459a8d418c05bdb3b689","name":"RegexTextProcess","bundel":"cn.piflow.bundle.file.RegexTextProcess","groups":"File","owner":"06whuxx@163.com","description":"Replace values in a column with regex","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"4bdc4560a6124b6f8b7a6ebbf8a945a4","name":"GetFile","bundel":"cn.piflow.bundle.file.GetFile","groups":"File","owner":"ygang@cnic.cn","description":"Download fields from hdfs to local","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true}],"handler":{}},{"id":"55cf3b5be804451ba6ee575d470cbc4f","groupName":"Ftp","stopsComponentVoList":[{"id":"500516c6d5c34080977d050f1d90a081","name":"LoadFromFtpToHDFS","bundel":"cn.piflow.bundle.ftp.LoadFromFtpToHDFS","groups":"Ftp","owner":"yangqidong@cnic.cn","description":"Upload files or folders to HDFS","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"5d4a4176b59f403cba834ab120ab1500","name":"UploadToFtp","bundel":"cn.piflow.bundle.ftp.UploadToFtp","groups":"Ftp","owner":"xiaoxiao@cnic.cn","description":"Upload file to ftp server","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true}],"handler":{}},{"id":"aeffd8538cca42478879311a7c4417d4","groupName":"GraphX","stopsComponentVoList":[{"id":"8ed605a0ace142d0b54ad740856f0e0b","name":"LoadGraph","bundel":"cn.piflow.bundle.graphx.LoadGraph","groups":"GraphX","owner":"06whuxx@163.com","description":"Load data and construct a graphx","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"edges,vertex","outPortType":{"stringValue":"USER_DEFAULT","text":"UserDefault"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"fbfa9fac9e784d7686dd118c169dcc6c","name":"LabelPropagation","bundel":"cn.piflow.bundle.graphx.LabelPropagation","groups":"GraphX","owner":"06whuxx@163.com","description":"Compute sub graphs","inports":"edgesIn,vertexIn","inPortType":{"stringValue":"USER_DEFAULT","text":"UserDefault"},"outports":"edgesOut,vertexOut","outPortType":{"stringValue":"USER_DEFAULT","text":"UserDefault"},"isCustomized":false,"visualizationType":"","isShow":true}],"handler":{}},{"id":"4ae83ea479ea4367b0fc42fe62ed701e","groupName":"Hbase","stopsComponentVoList":[{"id":"3b5e53b6001a41fba07cdf0b4895359f","name":"ReadHbase","bundel":"cn.piflow.bundle.hbase.ReadHbase","groups":"Hbase","owner":"bf219319@163.com","description":"Read data from Hbase","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"b5286fc0d6db4603a7274cd4a60c1d7e","name":"PutHbase","bundel":"cn.piflow.bundle.hbase.PutHbase","groups":"Hbase","owner":"bf219319@163.com","description":"Put data to Hbase","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true}],"handler":{}},{"id":"5c557cae1d27434db76aa32b4bf8e8ad","groupName":"Hdfs","stopsComponentVoList":[{"id":"ac098fc970ef41c18bf9a2ec3b8a7144","name":"DeleteHdfs","bundel":"cn.piflow.bundle.hdfs.DeleteHdfs","groups":"Hdfs","owner":"ygang@cnic.com","description":"Delete files or directories on HDFS","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"569473fdcfea4d3bbe37c5b377a6f596","name":"UnzipFilesOnHDFS","bundel":"cn.piflow.bundle.hdfs.UnzipFilesOnHDFS","groups":"Hdfs","owner":"yangqidong@cnic.cn","description":"Extract files on hdfs","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"3fecd1ab1d1f4e2c81d7e0c59a3e2834","name":"SelectFilesByName","bundel":"cn.piflow.bundle.hdfs.SelectFilesByName","groups":"Hdfs","owner":"yangqidong@cnic.cn","description":"Select files by file name","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"d8ea40c9f4454448bda682aa3f03abd1","name":"SaveToHdfs","bundel":"cn.piflow.bundle.hdfs.SaveToHdfs","groups":"Hdfs","owner":"ygang@cnic.cn","description":"Put data into hdfs ","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"08cae8a866a843a29a568c50fb6e6952","name":"GetHdfs","bundel":"cn.piflow.bundle.hdfs.GetHdfs","groups":"Hdfs","owner":"ygang@cnic.com","description":"Get data from hdfs","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"d41eeb9cffcd42ff8b25dc0227b6c5d9","name":"ListHdfs","bundel":"cn.piflow.bundle.hdfs.ListHdfs","groups":"Hdfs","owner":"ygang@cnic.com","description":"Retrieve a list of files from hdfs","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"a6f3db32f8c8453fadd3604a35753802","name":"PutHdfs","bundel":"cn.piflow.bundle.hdfs.PutHdfs","groups":"Hdfs","owner":"ygang@cnic.com","description":"Put data into hdfs","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"2c419c8231e04c21bd53c0ed24ac7b58","name":"FileDownHdfs","bundel":"cn.piflow.bundle.hdfs.FileDownHdfs","groups":"Hdfs","owner":"yangqidong@cnic.cn","description":"Download the data from the url to HDFS","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true}],"handler":{}},{"id":"4febe540cb9943e19eb88f423a780625","groupName":"Hive","stopsComponentVoList":[{"id":"1ff2540f083c4863a1c81487ae5d1d32","name":"PutHiveQL","bundel":"cn.piflow.bundle.hive.PutHiveQL","groups":"Hive","owner":"xiaoxiao@cnic.cn","description":"Execute hiveQL script","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"1e004616dd394e0ea656e9e348dae056","name":"SelectHiveQLByJDBC","bundel":"cn.piflow.bundle.hive.SelectHiveQLByJDBC","groups":"Hive","owner":"xiaomeng7890@gmail.com","description":"some hive can only achieve by jdbc, this stop is designed for this","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"be9138e8aa614093bb4437a4cdd018c4","name":"SelectHiveQL","bundel":"cn.piflow.bundle.hive.SelectHiveQL","groups":"Hive","owner":"xjzhu@cnic.cn","description":"Execute select clause of hiveQL","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"d559b8d5c9d344c6854cdea3f19422c0","name":"PutHiveStreaming","bundel":"cn.piflow.bundle.hive.PutHiveStreaming","groups":"Hive","owner":"xjzhu@cnic.cn","description":"Save data to hive","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"9e7f2036b45645f39396bcc0e3dfda91","name":"PutHiveMode","bundel":"cn.piflow.bundle.hive.PutHiveMode","groups":"Hive","owner":"xjzhu@cnic.cn","description":"Modes for saving data hive","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true}],"handler":{}},{"id":"02e5dfcfa9b7463eb4b036988fc59065","groupName":"Http","stopsComponentVoList":[{"id":"d8aa3309267341509834cd25299476e2","name":"PostUrl","bundel":"cn.piflow.bundle.http.PostUrl","groups":"Http","owner":"ygang@cnic.com","description":"Send a post request to the specified http","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"2bf5cedce06f40b6922a85917edc773a","name":"GetUrl","bundel":"cn.piflow.bundle.http.GetUrl","groups":"Http","owner":"ygang@cnic.com","description":"Send a get request to the specified http","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"3aa0fd945a8746d38a0d34057f4f87c6","name":"ExeInvoke","bundel":"com.supermap.exe.bundle.ExeInvoke","groups":"Http","owner":"zhangrongbin@supermap.com","description":"invoke exe program by windows exe exec service","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true}],"handler":{}},{"id":"b20640891b824b4db7685caf47c39bd7","groupName":"Jdbc","stopsComponentVoList":[{"id":"b32103271ec54f108ca300859208c649","name":"MysqlWrite","bundel":"cn.piflow.bundle.jdbc.MysqlWrite","groups":"Jdbc","owner":"xjzhu@cnic.cn","description":"Write data to mysql database with jdbc","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"2b67271bfd1d432a8b877116948f8940","name":"MysqlReadIncremental","bundel":"cn.piflow.bundle.jdbc.MysqlReadIncremental","groups":"Jdbc","owner":"xjzhu@cnic.cn","description":"Read data from mysql incrementaly","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"02b1b3ffa98344e8b6c898f0527c83fc","name":"JdbcReadFromOracle","bundel":"cn.piflow.bundle.jdbc.JdbcReadFromOracle","groups":"Jdbc","owner":"yangqidong@cnic.cn","description":"Read from oracle","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"b6da973d3ca944c2b5044ca869722e65","name":"OracleRead","bundel":"cn.piflow.bundle.jdbc.OracleRead","groups":"Jdbc","owner":"xjzhu@cnic.cn","description":"Read data From oracle","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"5d5bbeb1c5b3453e83da2c0aad2c8645","name":"OracleReadByPartition","bundel":"cn.piflow.bundle.jdbc.OracleReadByPartition","groups":"Jdbc","owner":"xjzhu@cnic.cn","description":"Read data From oracle","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"699cd4b26d6d488294a58f46d5c047a2","name":"ImpalaRead","bundel":"cn.piflow.bundle.jdbc.ImpalaRead","groups":"Jdbc","owner":"yangqidong@cnic.cn","description":"Get data from impala","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"6402fa0968b44b1f895c958acda4d269","name":"MysqlRead","bundel":"cn.piflow.bundle.jdbc.MysqlRead","groups":"Jdbc","owner":"xjzhu@cnic.cn","description":"Read data from mysql database with jdbc","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"8a2da8b443b34a0aab7529962e07b580","name":"OracleWrite","bundel":"cn.piflow.bundle.jdbc.OracleWrite","groups":"Jdbc","owner":"yangqidong@cnic.cn","description":"Write data to oracle","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true}],"handler":{}},{"id":"47f4b98d188943c9bc8da70492dbc202","groupName":"Json","stopsComponentVoList":[{"id":"bb41df71b69a49f5a6f1f15e2d18573e","name":"GetStsNews","bundel":"cn.sts.Piflow.GetStsNews","groups":"Json","owner":"bf219319@162.com","description":"News data incremental acquisition ","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"38b7f1ac080b4b61bd4b522b42284b7f","name":"JsonStringParser","bundel":"cn.piflow.bundle.json.JsonStringParser","groups":"Json","owner":"xjzhu@cnic.cn","description":"Parse json string","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"4da4ed352f024051bf007c2e31f2aa44","name":"FolderJsonParser","bundel":"cn.piflow.bundle.json.FolderJsonParser","groups":"Json","owner":"yangqidong@cnic.cn","description":"Parse json folder","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"77276305d2204cef9a991d72c39400b9","name":"JsonSave","bundel":"cn.piflow.bundle.json.JsonSave","groups":"Json","owner":"xjzhu@cnic.cn","description":"Save data into json file","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"c7df35f23ac94ae1bf9aed041f211de1","name":"StopTrigger","bundel":"cn.piflow.bundle.inner.StopTrigger","groups":"Json","owner":"xjzhu@cnic.cn","description":"Run stop with mock data","inports":"None","inPortType":{"stringValue":"NONE","text":"None"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"bc88da690cd844bfaa394bf18dcc4a27","name":"JsonParser","bundel":"cn.piflow.bundle.json.JsonParser","groups":"Json","owner":"xjzhu@cnic.cn","description":"Parse json file","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true}],"handler":{}},{"id":"5004dcc6c3ab407094fcbf404d6130e1","groupName":"Machine Learning","stopsComponentVoList":[{"id":"f8176ecf599e4c9da07fca2916ff46bf","name":"NaiveBayesPrediction","bundel":"cn.piflow.bundle.ml_classification.NaiveBayesPrediction","groups":"Machine Learning","owner":"06whuxx@163.com","description":"Use an existing NaiveBayes model to predict","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"251b29df6c2646339eebda8240f78f52","name":"BisectingKMeansPrediction","bundel":"cn.piflow.bundle.ml_clustering.BisectingKMeansPrediction","groups":"Machine Learning","owner":"06whuxx@163.com","description":"use an existing BisectingKMeans model to predict","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"17a3234413184adbabd30053910362d2","name":"BisectingKMeansTraining","bundel":"cn.piflow.bundle.ml_clustering.BisectingKMeansTraining","groups":"Machine Learning","owner":"06whuxx@163.com","description":"BisectingKMeans clustering","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"68181db2d8084b7ca17a31262837b708","name":"DecisionTreePrediction","bundel":"cn.piflow.bundle.ml_classification.DecisionTreePrediction","groups":"Machine Learning","owner":"06whuxx@163.com","description":"Use an existing decision tree model to predict.","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"2c437a13009d4673b3b12f70ec16cc9b","name":"RandomForestTraining","bundel":"cn.piflow.bundle.ml_classification.RandomForestTraining","groups":"Machine Learning","owner":"06whuxx@163.com","description":"Train a RandomForest model","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"8b18fb9477024d20abc01805647cc5c7","name":"MultilayerPerceptronPrediction","bundel":"cn.piflow.bundle.ml_classification.MultilayerPerceptronPrediction","groups":"Machine Learning","owner":"06whuxx@163.com","description":"Use an existing multilayer perceptron model to predict","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"52459ef8c9d348f19a7d6495793ac86e","name":"GaussianMixtureTraining","bundel":"cn.piflow.bundle.ml_clustering.GaussianMixtureTraining","groups":"Machine Learning","owner":"06whuxx@163.com","description":"GaussianMixture clustering","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"09e59191b4dc46e8b820bea3e64eaf0d","name":"LogisticRegressionPrediction","bundel":"cn.piflow.bundle.ml_classification.LogisticRegressionPrediction","groups":"Machine Learning","owner":"06whuxx@163.com","description":"Use an existing logistic regression model to predict","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"4b34b3c1104b42648e03066b592424c4","name":"GaussianMixturePrediction","bundel":"cn.piflow.bundle.ml_clustering.GaussianMixturePrediction","groups":"Machine Learning","owner":"06whuxx@163.com","description":"Use an existing GaussianMixture Model to predict","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"68a9ab08a22c4d659a75c6e15b11304a","name":"MultilayerPerceptronTraining","bundel":"cn.piflow.bundle.ml_classification.MultilayerPerceptronTraining","groups":"Machine Learning","owner":"xiaoxiao@cnic.cn","description":"Train a multilayer perceptron model","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"aa46a8d46099498aa894d7af896873e1","name":"KmeansTraining","bundel":"cn.piflow.bundle.ml_clustering.KmeansTraining","groups":"Machine Learning","owner":"06whuxx@163.com","description":"Kmeans clustering","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"d6a39351b3184114a8423da61310aef4","name":"GBTTraining","bundel":"cn.piflow.bundle.ml_classification.GBTTraining","groups":"Machine Learning","owner":"06whuxx@163.com","description":"Train a GBT Model","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"92c37b5152f440b2850fae675da45993","name":"WordToVec","bundel":"cn.piflow.bundle.ml_feature.WordToVec","groups":"Machine Learning","owner":"06whuxx@163.com","description":"Transfer word to vector","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"751b90f6371d4aceb76be05b6fe5c21c","name":"RandomForestPrediction","bundel":"cn.piflow.bundle.ml_classification.RandomForestPrediction","groups":"Machine Learning","owner":"06whuxx@163.com","description":"use an existing RandomForest Model to predict","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"ba6f44ee4f274a93be250e88ae6b3443","name":"NaiveBayesTraining","bundel":"cn.piflow.bundle.ml_classification.NaiveBayesTraining","groups":"Machine Learning","owner":"06whuxx@163.com","description":"Train a NaiveBayes model","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"b9ee092946744a0ea0968e9570697075","name":"GBTPrediction","bundel":"cn.piflow.bundle.ml_classification.GBTPrediction","groups":"Machine Learning","owner":"06whuxx@163.com","description":"Use an existing GBT Model to predict","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"fb45ba25386449af9d7be0b2289f57fe","name":"LDATraining","bundel":"cn.piflow.bundle.ml_clustering.LDATraining","groups":"Machine Learning","owner":"06whuxx@163.com","description":"LDA clustering","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"2d999c4c37604217b97d8d6762c45e24","name":"LDAPrediction","bundel":"cn.piflow.bundle.ml_clustering.LDAPrediction","groups":"Machine Learning","owner":"06whuxx@163.com","description":"Use an existing LDAModel to predict","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"cc47e339079a4d3f9d2f6d9bb14880e3","name":"KmeansPrediction","bundel":"cn.piflow.bundle.ml_clustering.KmeansPrediction","groups":"Machine Learning","owner":"06whuxx@163.com","description":"Use an existing KmeansModel to predict","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"e3075619dbe34d7e9bc6ac7b01728ef0","name":"DecisionTreeTraining","bundel":"cn.piflow.bundle.ml_classification.DecisionTreeTraining","groups":"Machine Learning","owner":"06whuxx@163.com","description":"Train a decision tree model","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"9a2ce9caeb6547f8a53cd7e1ea9fa67c","name":"LogisticRegressionTraining","bundel":"cn.piflow.bundle.ml_classification.LogisticRegressionTraining","groups":"Machine Learning","owner":"06whuxx@163.com","description":"Train a logistic regression model","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true}],"handler":{}},{"id":"e56729bbf4224cd1ab7536f94f514602","groupName":"Memcached","stopsComponentVoList":[{"id":"0ea93ca4b0ef48f7ab8f5938f1c1b078","name":"ComplementByMemcache","bundel":"cn.piflow.bundle.memcached.ComplementByMemcache","groups":"Memcached","owner":"yangqidong@cnic.cn","description":"Complement by Memcache","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"eb536911c2084754ae6f3c9ee4ded84c","name":"PutMemcache","bundel":"cn.piflow.bundle.memcached.PutMemcache","groups":"Memcached","owner":"yangqidong@cnic.cn","description":"Put data to memcache","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"54681b21f47e418d97cf58b5f5525a3a","name":"GetMemcache","bundel":"cn.piflow.bundle.memcached.GetMemcache","groups":"Memcached","owner":"yangqidong@cnic.cn","description":"Get data from memache","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true}],"handler":{}},{"id":"0843f30f4f344ad3955ed4d034aab44b","groupName":"Message Queue","stopsComponentVoList":[{"id":"bb5ea28f3b1c48768fb47a1aed91d6f5","name":"ReadFromKafka","bundel":"cn.piflow.bundle.kafka.ReadFromKafka","groups":"Message Queue","owner":"06whuxx@163.com","description":"Read data from kafka","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"1957bf5ef2b74779a37b835a3407c720","name":"WriteToKafka","bundel":"cn.piflow.bundle.kafka.WriteToKafka","groups":"Message Queue","owner":"06whuxx@163.com","description":"Write data to kafka","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true}],"handler":{}},{"id":"0201bf50c7324917888aa958775d9b7c","groupName":"MongoDB","stopsComponentVoList":[{"id":"7bdf9832679d494a9502ddcd35537822","name":"GetMongoDB","bundel":"cn.piflow.bundle.mongodb.GetMongoDB","groups":"MongoDB","owner":"yangqidong@cnic.cn","description":"Get data from mongodb","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"0ab5b90fef614589af7a568651514b6d","name":"PutMongo","bundel":"cn.piflow.bundle.mongodb.PutMongo","groups":"MongoDB","owner":"yangqidong@cnic.cn","description":"Put data to mongodb","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"9a4bd6d2bbe74d6db6152162992d080b","name":"GetMongo","bundel":"cn.piflow.bundle.mongodb.GetMongo","groups":"MongoDB","owner":"yangqidong@cnic.cn","description":"Get data from mongodb","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"1850811eaa984f5c94fd47099e68be84","name":"PutMongoDB","bundel":"cn.piflow.bundle.mongodb.PutMongoDB","groups":"MongoDB","owner":"yangqidong@cnic.cn","description":"Put data to mongodb","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true}],"handler":{}},{"id":"f0a2356b85614889b8c59e45935bc680","groupName":"NSFC","stopsComponentVoList":[{"id":"9cc6c2cd28284535988dc2fab5a5e2d1","name":"HivePSNDistinct","bundel":"cn.piflow.bundle.nsfc.distinct.HivePSNDistinct","groups":"NSFC","owner":"xiaomeng7890@gmail.com","description":"person table distinct","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Relation,Entity","outPortType":{"stringValue":"USER_DEFAULT","text":"UserDefault"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"ef74e756321544bbaaba06f44e9f7b89","name":"CardCodeClean","bundel":"cn.piflow.bundle.nsfc.clean.CardCodeClean","groups":"NSFC","owner":"songdongze@cnic.cn","description":"Clean Id Card data.","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"e829bb90fc7d485fa592224249dc4fb3","name":"foreignKeyWash","bundel":"cn.piflow.bundle.nsfc.distinct.foreignKeyWash","groups":"NSFC","owner":"xiaomeng7890@gmail.com","description":"","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"a2e852bda6384ed7b75bfd9963d32519","name":"HivePRDDistinct","bundel":"cn.piflow.bundle.nsfc.distinct.HivePRDDistinct","groups":"NSFC","owner":"xiaomeng7890@gmail.com","description":"","inports":"productTable,productSpecTable","inPortType":{"stringValue":"USER_DEFAULT","text":"UserDefault"},"outports":"Relation,Entity","outPortType":{"stringValue":"USER_DEFAULT","text":"UserDefault"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"f2b2b18d6ad04248a169495e7d84905c","name":"HiveTableJoinOn","bundel":"cn.piflow.bundle.nsfc.distinct.HiveTableJoinOn","groups":"NSFC","owner":"xiaomeng7890@gmail.com","description":"","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"a461bf343fb745bfbcdc04473aa632cd","name":"RedisDistinctCachePersist","bundel":"cn.piflow.bundle.nsfc.distinct.RedisDistinctCachePersist","groups":"NSFC","owner":"xiaomeng7890@gmail.com","description":"persist the df into redis server, which will be used to distinct","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"d66a991190684ed0b26708ae65f7c809","name":"PersonIdExpansion","bundel":"cn.piflow.bundle.nsfc.distinct.PersonIdExpansion","groups":"NSFC","owner":"xiaomeng7890@gmail.com","description":"nothing to say bro","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"664060aa99d541b9970855dec1cd1ddf","name":"CSCDSearchArticleAndExtractXML","bundel":"cn.piflow.bundle.nsfc.externalAcquisition.CSCDSearchArticleAndExtractXML","groups":"NSFC","owner":"songdongze@cnic.cn","description":"CSCD Search Article And Extract XML","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"7974e7e0ec614652b022cc3000b79ff5","name":"ScopusSearchArticle","bundel":"cn.piflow.bundle.nsfc.externalAcquisition.ScopusSearchArticle","groups":"NSFC","owner":"ygang@cnic.cn","description":"Scopus search article","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"scopus_articlePort,scopus_article_api_response","outPortType":{"stringValue":"USER_DEFAULT","text":"UserDefault"},"isCustomized":false,"visualizationType":"","isShow":true}],"handler":{}},{"id":"f363d40f737a40f88e1fb7660d89850a","groupName":"Neo4j","stopsComponentVoList":[{"id":"0e8f5c36af5140b1934a0a9cf46825bc","name":"HiveToNeo4j","bundel":"cn.piflow.bundle.neo4j.HiveToNeo4j","groups":"Neo4j","owner":"anhong12@cnic.cn","description":"Hive to Neo4j","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"a1621b70b53943f691ac9d401cf67993","name":"RunCypher","bundel":"cn.piflow.bundle.neo4j.RunCypher","groups":"Neo4j","owner":"anhong12@cnic.cn","description":"Run cql on neo4j","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"7b182cf5b0324526be757a252092eb45","name":"PutNeo4j","bundel":"cn.piflow.bundle.neo4j.PutNeo4j","groups":"Neo4j","owner":"yangqidong@cnic.cn","description":"Write DataFrame to neo4j,automatically get the fields name","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"33d67766ad7c42398bed29d16ea80a13","name":"AllFieldsCleanNeo4j","bundel":"cn.piflow.bundle.neo4j.AllFieldsCleanNeo4j","groups":"Neo4j","owner":"anhong12@cnic.cn","description":"Clean DataFrame for NSFC Neo4j","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true}],"handler":{}},{"id":"9e24a5556c9a4f6392b98d077058c3d2","groupName":"RDF","stopsComponentVoList":[{"id":"693046beb0f24e439d3e764ec3c2c4eb","name":"CsvToNeo4J","bundel":"cn.piflow.bundle.rdf.CsvToNeo4J","groups":"RDF","owner":"xiaomeng7890@gmail.com","description":"this stop use linux shell & neo4j-import command to load CSV file data to create or insert into neo4jthe neo4j version should be above 3.0","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"980a6d3d261e404199a60bfc10f93c01","name":"RdfToDF","bundel":"cn.piflow.bundle.rdf.RdfToDF","groups":"RDF","owner":"xiaomeng7890@gmail.com","description":"convert *.n3 RDF file to CSV(DataFrame) file","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"entityOut,relationshipOut","outPortType":{"stringValue":"USER_DEFAULT","text":"UserDefault"},"isCustomized":false,"visualizationType":"","isShow":true}],"handler":{}},{"id":"f1dcdcf375464b0097995f14856b25b6","groupName":"Redis","stopsComponentVoList":[{"id":"d0a02ddb44f64388922f86f33bc30184","name":"WriteToRedis","bundel":"cn.piflow.bundle.redis.WriteToRedis","groups":"Redis","owner":"06whuxx@163.com","description":"Write data to redis","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"bf005f29dd65465aa679473ad1b58416","name":"ReadFromRedis","bundel":"cn.piflow.bundle.redis.ReadFromRedis","groups":"Redis","owner":"06whuxx@163.com","description":"Read data from redis","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true}],"handler":{}},{"id":"ca49a61fea8042599604a18f87f4a93e","groupName":"Script","stopsComponentVoList":[{"id":"caa94ca9046a4d898382de9926a275b8","name":"ExecutePythonWithDataFrame","bundel":"cn.piflow.bundle.script.ExecutePythonWithDataFrame","groups":"Script","owner":"xjzhu@cnic.cn","description":"Execute python script with dataframe","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"a0d33773469249e6bc4f5e32cf9730fa","name":"ExecuteScala","bundel":"cn.piflow.bundle.script.ExecuteScala","groups":"Script","owner":"xjzhu@cnic.cn","description":"Execute scala script","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"4f0c33b608fa48549322a8c0635a6976","name":"ExecutePython","bundel":"cn.piflow.bundle.script.ExecutePython","groups":"Script","owner":"xjzhu@cnic.cn","description":"Execute python script","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"3d363aa4e6b84888a69b253321374664","name":"ExecuteShell","bundel":"cn.piflow.bundle.script.ExecuteShell","groups":"Script","owner":"ygang@cnic.cn","description":"Execute shell script","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"4ce0474281ea4835a7ecbc574debe353","name":"DataFrameRowParser","bundel":"cn.piflow.bundle.script.DataFrameRowParser","groups":"Script","owner":"xjzhu@cnic.cn","description":"Create dataframe by schema","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true}],"handler":{}},{"id":"dab0dc9b8bdc43cb88df847ac444c1bb","groupName":"Solr","stopsComponentVoList":[{"id":"9b9c35007ef1463fba84974b53e0ca8a","name":"GetFromSolr","bundel":"cn.piflow.bundle.solr.GetFromSolr","groups":"Solr","owner":"yangqidong@cnic.cn","description":"Read data from solr","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"79fac0b01bb2411bbc8d0f761c44f6d0","name":"PutIntoSolr","bundel":"cn.piflow.bundle.solr.PutIntoSolr","groups":"Solr","owner":"yangqidong@cnic.cn","description":"Write data to solr","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true}],"handler":{}},{"id":"d599451f87e6401e84afd38a5d9e5442","groupName":"Spider","stopsComponentVoList":[{"id":"dde9c45c38114de08a8fa8723b7de2c9","name":"spider","bundel":"cn.piflow.bundle.internetWorm.spider","groups":"Spider","owner":"yangqidong@cnic.cn","description":"Crawl data from websites","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true}],"handler":{}},{"id":"c39f3afa1c3c4b0785baee0e73a38d0f","groupName":"Streaming","stopsComponentVoList":[{"id":"74abb4de26504068859c9961b331b06d","name":"FlumeStream","bundel":"cn.piflow.bundle.streaming.FlumeStream","groups":"Streaming","owner":"xjzhu@cnic.cn","description":"Get data from flume","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"4584b68768dc4c1b936ac0d6e95b5894","name":"SocketTextStreamByWindow","bundel":"cn.piflow.bundle.streaming.SocketTextStreamByWindow","groups":"Streaming","owner":"xjzhu@cnic.cn","description":"Receive text data from socket by window","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"aea332175dbb44858941938e0d0363e9","name":"SocketTextStream","bundel":"cn.piflow.bundle.streaming.SocketTextStream","groups":"Streaming","owner":"xjzhu@cnic.cn","description":"Receive text data from socket","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"fbeb4572845048748316c3d3022aef92","name":"KafkaStream","bundel":"cn.piflow.bundle.streaming.KafkaStream","groups":"Streaming","owner":"xjzhu@cnic.cn","description":"Read data from kafka","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"94bf22619515458682e1f9fdcea224ed","name":"TextFileStream","bundel":"cn.piflow.bundle.streaming.TextFileStream","groups":"Streaming","owner":"xjzhu@cnic.cn","description":"Get text file streaming data","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true}],"handler":{}},{"id":"f772bdcf54e1462bb811c17b6ef16eaa","groupName":"Visualization","stopsComponentVoList":[{"id":"e4c8fab70e7b42d48a209ff5f9c78e53","name":"PieChart","bundel":"cn.piflow.bundle.visualization.PieChart","groups":"Visualization","owner":"xjzhu@cnic.cn","description":"Show data with pie chart. ","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"PIECHART","isShow":true},{"id":"04344e94355e40b4bf751cebb6e5f8e7","name":"LineChart","bundel":"cn.piflow.bundle.visualization.LineChart","groups":"Visualization","owner":"xjzhu@cnic.cn","description":"Show data with scatter plot. The ordinate is represented by customizedProperties, the key of customizedProperty is the dimentsion, and the value of customizedProperty is the operation for the dimension, such as COUNT/SUM/AVG/MAX/MIN.","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":true,"visualizationType":"LINECHART","isShow":true},{"id":"7870f5dc37b84d87a2dc833aad971fed","name":"TableShow","bundel":"cn.piflow.bundle.visualization.TableShow","groups":"Visualization","owner":"xjzhu@cnic.cn","description":"Show data with table","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"TABLE","isShow":true},{"id":"36711cd7e00249288265ca23cea2ae24","name":"Histogram","bundel":"cn.piflow.bundle.visualization.Histogram","groups":"Visualization","owner":"xjzhu@cnic.cn","description":"Show data with histogram. The ordinate is represented by customizedProperties, the key of customizedProperty is the dimentsion, and the value of customizedProperty is the operation for the dimension, such as COUNT/SUM/AVG/MAX/MIN.","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":true,"visualizationType":"HISTOGRAM","isShow":true},{"id":"e34df21ec08147c0b7d6394c27d080c4","name":"RadarChart","bundel":"cn.piflow.bundle.visualization.RadarChart","groups":"Visualization","owner":"xjzhu@cnic.cn","description":"Show data with pie chart. ","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"RADARCHART","isShow":true},{"id":"89999ed9c9404be1a59be84bfadabc38","name":"ScatterPlotChart","bundel":"cn.piflow.bundle.visualization.ScatterPlotChart","groups":"Visualization","owner":"xjzhu@cnic.cn","description":"Show data with scatter plot chart.Dimension is represented by customizedProperties, the key of customizedProperty is the dimentsion column, and the value is the index of the dimension. The first index represent abscissa, the second index represent ordinate. ","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":true,"visualizationType":"SCATTERPLOT","isShow":true}],"handler":{}},{"id":"c334973a14da47f1a7826675ec116e3a","groupName":"Xml","stopsComponentVoList":[{"id":"316e9c56d6ae438c8b446fd39bbb5225","name":"XmlParser","bundel":"cn.piflow.bundle.xml.XmlParser","groups":"Xml","owner":"xjzhu@cnic.cn","description":"Parse xml file","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"87e7c3fc2e114b9d826c1eabb189cbd3","name":"XmlSave","bundel":"cn.piflow.bundle.xml.XmlSave","groups":"Xml","owner":"xjzhu@cnic.cn","description":"Save data to xml file","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"03c20edbb391473087dd0b2859375f97","name":"XmlParserGenerateNewField","bundel":"cn.piflow.bundle.nsfc.XmlParserGenerateNewField","groups":"Xml","owner":"songdongze@cnic.cn","description":"parse xml string from a hive field, and generate a new field from a xml tag","inports":"Any","inPortType":{"stringValue":"ANY","text":"Any"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"d451d546724e4a1aae1ade6790c13704","name":"XmlParserColumns","bundel":"cn.piflow.bundle.xml.XmlParserColumns","groups":"Xml","owner":"ygang@cnic.cn","description":"Parse xml data in columns in upstream data","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"e8eac804c5ad45dda7d6a195d7da41e5","name":"XmlStringParser","bundel":"cn.piflow.bundle.xml.XmlStringParser","groups":"Xml","owner":"yangqidong@cnic.cn","description":"Parse xml string","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"8a5ee83a981f4a83a02055126cc83d2b","name":"XmlParserFolder","bundel":"cn.piflow.bundle.xml.XmlParserFolder","groups":"Xml","owner":"lijie","description":"Parse xml folder","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true}],"handler":{}},{"id":"d28eefeac795460589bc161846c4edba","groupName":"distinct","stopsComponentVoList":[{"id":"9cc6c2cd28284535988dc2fab5a5e2d1","name":"HivePSNDistinct","bundel":"cn.piflow.bundle.nsfc.distinct.HivePSNDistinct","groups":"distinct","owner":"xiaomeng7890@gmail.com","description":"person table distinct","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Relation,Entity","outPortType":{"stringValue":"USER_DEFAULT","text":"UserDefault"},"isCustomized":false,"visualizationType":"","isShow":false},{"id":"e829bb90fc7d485fa592224249dc4fb3","name":"foreignKeyWash","bundel":"cn.piflow.bundle.nsfc.distinct.foreignKeyWash","groups":"distinct","owner":"xiaomeng7890@gmail.com","description":"","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"a2e852bda6384ed7b75bfd9963d32519","name":"HivePRDDistinct","bundel":"cn.piflow.bundle.nsfc.distinct.HivePRDDistinct","groups":"distinct","owner":"xiaomeng7890@gmail.com","description":"","inports":"productTable,productSpecTable","inPortType":{"stringValue":"USER_DEFAULT","text":"UserDefault"},"outports":"Relation,Entity","outPortType":{"stringValue":"USER_DEFAULT","text":"UserDefault"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"f2b2b18d6ad04248a169495e7d84905c","name":"HiveTableJoinOn","bundel":"cn.piflow.bundle.nsfc.distinct.HiveTableJoinOn","groups":"distinct","owner":"xiaomeng7890@gmail.com","description":"","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"a461bf343fb745bfbcdc04473aa632cd","name":"RedisDistinctCachePersist","bundel":"cn.piflow.bundle.nsfc.distinct.RedisDistinctCachePersist","groups":"distinct","owner":"xiaomeng7890@gmail.com","description":"persist the df into redis server, which will be used to distinct","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"d66a991190684ed0b26708ae65f7c809","name":"PersonIdExpansion","bundel":"cn.piflow.bundle.nsfc.distinct.PersonIdExpansion","groups":"distinct","owner":"xiaomeng7890@gmail.com","description":"nothing to say bro","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true}],"handler":{}},{"id":"a2a2c1479b02496c81674ac4708d5dd2","groupName":"foreignKey","stopsComponentVoList":[{"id":"e829bb90fc7d485fa592224249dc4fb3","name":"foreignKeyWash","bundel":"cn.piflow.bundle.nsfc.distinct.foreignKeyWash","groups":"foreignKey","owner":"xiaomeng7890@gmail.com","description":"","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true}],"handler":{}},{"id":"b8e7999c923b4b5a8461b5e68b2142c3","groupName":"person","stopsComponentVoList":[{"id":"9cc6c2cd28284535988dc2fab5a5e2d1","name":"HivePSNDistinct","bundel":"cn.piflow.bundle.nsfc.distinct.HivePSNDistinct","groups":"person","owner":"xiaomeng7890@gmail.com","description":"person table distinct","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Relation,Entity","outPortType":{"stringValue":"USER_DEFAULT","text":"UserDefault"},"isCustomized":false,"visualizationType":"","isShow":false}],"handler":{}},{"id":"f59f00b6c7894aa19c0fbb1e5d5040e1","groupName":"product","stopsComponentVoList":[{"id":"a2e852bda6384ed7b75bfd9963d32519","name":"HivePRDDistinct","bundel":"cn.piflow.bundle.nsfc.distinct.HivePRDDistinct","groups":"product","owner":"xiaomeng7890@gmail.com","description":"","inports":"productTable,productSpecTable","inPortType":{"stringValue":"USER_DEFAULT","text":"UserDefault"},"outports":"Relation,Entity","outPortType":{"stringValue":"USER_DEFAULT","text":"UserDefault"},"isCustomized":false,"visualizationType":"","isShow":true}],"handler":{}},{"id":"a35ab703209943c8892a56e5f8fcef92","groupName":"sha0w","stopsComponentVoList":[{"id":"9cc6c2cd28284535988dc2fab5a5e2d1","name":"HivePSNDistinct","bundel":"cn.piflow.bundle.nsfc.distinct.HivePSNDistinct","groups":"sha0w","owner":"xiaomeng7890@gmail.com","description":"person table distinct","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Relation,Entity","outPortType":{"stringValue":"USER_DEFAULT","text":"UserDefault"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"e829bb90fc7d485fa592224249dc4fb3","name":"foreignKeyWash","bundel":"cn.piflow.bundle.nsfc.distinct.foreignKeyWash","groups":"sha0w","owner":"xiaomeng7890@gmail.com","description":"","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"a2e852bda6384ed7b75bfd9963d32519","name":"HivePRDDistinct","bundel":"cn.piflow.bundle.nsfc.distinct.HivePRDDistinct","groups":"sha0w","owner":"xiaomeng7890@gmail.com","description":"","inports":"productTable,productSpecTable","inPortType":{"stringValue":"USER_DEFAULT","text":"UserDefault"},"outports":"Relation,Entity","outPortType":{"stringValue":"USER_DEFAULT","text":"UserDefault"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"f2b2b18d6ad04248a169495e7d84905c","name":"HiveTableJoinOn","bundel":"cn.piflow.bundle.nsfc.distinct.HiveTableJoinOn","groups":"sha0w","owner":"xiaomeng7890@gmail.com","description":"","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"a461bf343fb745bfbcdc04473aa632cd","name":"RedisDistinctCachePersist","bundel":"cn.piflow.bundle.nsfc.distinct.RedisDistinctCachePersist","groups":"sha0w","owner":"xiaomeng7890@gmail.com","description":"persist the df into redis server, which will be used to distinct","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true},{"id":"d66a991190684ed0b26708ae65f7c809","name":"PersonIdExpansion","bundel":"cn.piflow.bundle.nsfc.distinct.PersonIdExpansion","groups":"sha0w","owner":"xiaomeng7890@gmail.com","description":"nothing to say bro","inports":"Default","inPortType":{"stringValue":"DEFAULT","text":"Default"},"outports":"Default","outPortType":{"stringValue":"DEFAULT","text":"Default"},"isCustomized":false,"visualizationType":"","isShow":true}],"handler":{}}],"errorMsg":"Succeeded"}
      this.$axios
          .post("/stopsManage/stopsComponentList")
          .then((res) => {
            if (res.data.code === 200) {
              let data = res.data, defaultState = [];
              // data.stopGroupList = JSON.parse(JSON.stringify(data.stopGroupList).replace(/stopsComponentVoList/g, 'children'))

              data.stopGroupList.forEach((item)=>{
                item.stopsComponentVoList.forEach((items)=>{
                  items.id = items.groups.replace(/\s*/g,"")+ items.id;
                  if (items.isShow){
                    defaultState.push(items.id)
                  }
                })
              })
              this.tableData = data.stopGroupList;
              this.searchEvent();

              this.checkRowKeys = defaultState;


              this.total = res.data.count;
            } else {
              this.$Message.error({
                content: this.$t("tip.request_fail_content"),
                duration: 3
              });
            }
          })
          .catch((error) => {
            console.log(error);
            this.$Message.error({
              content: this.$t("tip.fault_content"),
              duration: 3
            });
          });


    },

    searchEvent () {

      const param = XEUtils.toValueString(this.param).trim().toLowerCase();
      if (param) {
        const filterRE = new RegExp(param, 'gi')
        const options = { children: 'stopsComponentVoList' }
        const searchProps = ['groupName', 'bundel', 'owner', 'description']
        const rest = XEUtils.searchTree(this.tableData, item => searchProps.some(key => XEUtils.toValueString(item[key]).toLowerCase().indexOf(param) > -1), options)
        XEUtils.eachTree(rest, item => {
          searchProps.forEach(key => {
            item[key] = XEUtils.toValueString(item[key]).replace(filterRE, match => `<span class="keyword-lighten">${match}</span>`)
          })
        }, options)
        this.tableList = rest


        // 搜索之后默认展开所有子节点
        this.$nextTick(() => {
          let defaultState = [];

          this.tableList.forEach((item)=>{
            item.stopsComponentVoList.forEach((items)=>{
              items.id = items.groups.replace(/\s*/g,"")+ items.id;
              if (items.isShow){
                defaultState.push(items.id)
              }
            })
          })

          this.checkRowKeys = defaultState;
          this.$refs.xTree.setAllTreeExpand(true)
        })
      } else {
        this.tableList = this.tableData
      }
    },

    onPageChange(pageNo) {
      this.page = pageNo;
      // this.getTableData();
      // this.spinShow=true;
    },
    onPageSizeChange(pageSize) {
      this.limit = pageSize;
      // this.getTableData();
      // this.spinShow=true;
    },
  },
};
</script>
<style lang="scss" scoped>
@import "./index.scss";
.tree-node-icon {
  width: 16px;
  text-align: center;
}

::v-deep .keyword-lighten {
  color: #f8f5f1;
  background-color: #009688;
}
.vxe-toolbar{
  background-color: rgba(255, 255, 255, 0);
}
</style>

